<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Panel Oficios</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-neutral-50 text-neutral-900 antialiased flex items-center justify-center">
  <div id="app" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <header class="mb-8 flex items-center justify-between gap-4">
      <div>
        <h1 class="text-2xl sm:text-3xl font-semibold tracking-tight">Panel de Oficios</h1>
        <p class="text-sm text-neutral-500">
          Selecciona una tarjeta y abre el formulario para crear el oficio que necesitas.
        </p>
      </div>
      <button onclick="logout()" class="px-4 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">
        Salir
      </button>
    </header>

    <!-- Grid de Cards -->
    <section aria-label="Accesos rápidos" class="mb-10">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6">
        <template v-for="card in cards" :key="card.id">
          <!-- Card: Oficio -->
          <a :href="card.url" target="_self"
            class="block group relative overflow-hidden rounded-2xl border bg-white hover:shadow-lg hover:border-neutral-200 transition-all duration-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-500 focus-visible:ring-offset-2 text-left flex flex-col h-full">
            <!-- Header de la tarjeta con ícono y título -->
            <div class="p-5 pb-0">
              <div class="flex items-center gap-4 mb-4">
                <div class="p-2 bg-blue-50 rounded-lg">
                  <img :src="`./assets/icons/${card.icon}.png`" :alt="card.name" class="w-8 h-8">
                </div>
                <div>
                  <h3 class="font-semibold text-lg text-gray-900">{{ card.name }}</h3>
                  <!-- <span class="inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full">
                    {{ card.desc }}
                  </span> -->
                </div>
              </div>
            </div>

            <!-- Cuerpo de la tarjeta con descripción -->
            <div class="px-5 pb-5 pt-2 flex-1">
              <p class="text-sm text-gray-600 mb-4">
                {{ card.desc }}
              </p>
            </div>

            <!-- Footer con botón de acción -->
            <div class="px-5 pb-5 pt-2 border-t border-gray-100">
              <span
                class="inline-flex items-center text-sm font-medium text-blue-600 group-hover:text-blue-800 transition-colors">
                Generar oficio
                <svg xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4 ml-1 transform group-hover:translate-x-1 transition-transform" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                </svg>
              </span>
            </div>
          </a>
        </template>
      </div>
    </section>
  </div>

  <!-- Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script>
    // Función para cerrar sesión
    const logout = () => {
      sessionStorage.removeItem("loggedIn");
      window.location.href = "index.html";
    };

    // Verificar autenticación antes de cargar la aplicación
    if (sessionStorage.getItem("loggedIn") !== "true") {
      window.location.href = "index.html";
    }

    const { createApp, ref, onMounted } = Vue;

    createApp({
      setup() {
        // Configurar tiempo de expiración de sesión (2 minutos)
        const sessionTimeout = 2 * 60 * 1000; // 2 minutos en milisegundos
        let timeoutId;

        const resetSessionTimer = () => {
          // Limpiar el temporizador anterior
          if (timeoutId) clearTimeout(timeoutId);

          // Establecer nuevo temporizador
          timeoutId = setTimeout(() => {
            alert("Su sesión ha expirado por inactividad.");
            logout();
          }, sessionTimeout);
        };

        // Reiniciar el temporizador con eventos de interacción del usuario
        const setupSessionTimer = () => {
          // Configurar eventos que indican actividad del usuario
          ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(event => {
            window.addEventListener(event, resetSessionTimer);
          });

          // Iniciar el temporizador por primera vez
          resetSessionTimer();
        };

        onMounted(() => {
          setupSessionTimer();
        });

        const cards = [
          {
            id: 1,
            name: 'Oficio Económico',
            desc: 'Genera un oficio formal para solicitar donaciones económicas voluntarias para la celebración del aniversario.',
            url: 'src/oficios/oficio-economico.html?from=panel',
            icon: 'economico'
          },
          {
            id: 2,
            name: 'Oficio Específico',
            desc: 'Crea un oficio para solicitar donaciones específicas en bienes o servicios necesarios para la celebración del aniversario.',
            url: 'src/oficios/oficio-especifico.html?from=panel',
            icon: 'especifico'
          },
          {
            id: 3,
            name: 'Oficio Invitación',
            desc: 'Crea oficios de invitación formal para personas o instituciones que desees invitar a participar para la celebración del aniversario.',
            url: 'src/oficios/oficio-invitacion.html?from=panel',
            icon: 'invitacion'
          },
          {
            id: 4,
            name: 'Oficio Deportes',
            desc: 'Genera oficios para la organización de torneos de fútbol, vóley y otras disciplinas deportivas para la celebración del aniversario.',
            url: 'src/oficios/oficio-deporte.html?from=panel',
            icon: 'deporte'
          },

        ];

        return { cards };
      }
    }).mount('#app');
  </script>
</body>

</html>